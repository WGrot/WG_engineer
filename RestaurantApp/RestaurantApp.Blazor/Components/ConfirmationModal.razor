@using RestaurantApp.Blazor.Components
@inherits ComponentBase

<GenericModal @bind-IsVisible="IsVisible"
              Title="@Title"
              >

    <ChildContent>
        <div class="text-center">
            <i class="bi bi-exclamation-triangle-fill text-warning" style="font-size: 3rem;"></i>
            <p class="mt-3">@Message</p>
            <p class="text-danger"><strong>This action cannot be undone!</strong></p>
        </div>
    </ChildContent>

    <FooterContent>
        <button class="btn btn-danger"
                @onclick="ConfirmDelete"
                disabled="@IsProcessing">
            @if (IsProcessing)
            {
                <span class="spinner-border spinner-border-sm me-2" role="statusEnumDto"></span>
            }
            <i class="bi bi-trash me-1"></i>@ConfirmButtonText
        </button>

        <button class="btn btn-secondary" @onclick="Cancel">
            <i class="bi bi-x me-1"></i>@cancelButtonText
        </button>
    </FooterContent>
</GenericModal>

@code {
    [Parameter] public bool IsVisible { get; set; }
    [Parameter] public EventCallback<bool> IsVisibleChanged { get; set; }

    [Parameter] public string Title { get; set; } = "Confirm Deletion";
    [Parameter] public string Message { get; set; } = "Are you sure you want to delete this item?";
    [Parameter] public bool IsProcessing { get; set; }
    [Parameter] public string ConfirmButtonText { get; set; } = "Delete";
    [Parameter] public string cancelButtonText { get; set; } = "Cancel";

    [Parameter] public EventCallback OnConfirm { get; set; }
    [Parameter] public EventCallback OnCancel { get; set; }

    private async Task ConfirmDelete()
    {
        if (OnConfirm.HasDelegate)
            await OnConfirm.InvokeAsync();
    }

    private async Task Cancel()
    {
        if (OnCancel.HasDelegate)
            await OnCancel.InvokeAsync();
        await IsVisibleChanged.InvokeAsync(false);
    }
}