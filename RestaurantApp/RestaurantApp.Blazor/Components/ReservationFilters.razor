@using RestaurantApp.Shared.DTOs.SearchParameters
@using RestaurantApp.Shared.Models
<div class="card shadow-sm border-0 sticky-lg-top" style="top: 20px;">
    <div class="card-header bg-primary text-white">
        <h5 class="mb-0">
            <i class="bi bi-funnel me-2"></i>Filters
        </h5>
    </div>
    <div class="card-body">
        
        @if(showCustomerFilters){
            <!-- Customer Name -->
            <div class="mb-3">
                <label class="form-label small fw-semibold text-muted">
                    <i class="bi bi-person me-1"></i>Customer Name
                </label>
                <input type="text"
                       class="form-control form-control-sm"
                       placeholder="Enter name..."
                       @bind="SearchParameters.CustomerName"
                       @bind:event="oninput"/>
            </div>

            <!-- Email -->
            <div class="mb-3">
                <label class="form-label small fw-semibold text-muted">
                    <i class="bi bi-envelope me-1"></i>Email Address
                </label>
                <input type="text"
                       class="form-control form-control-sm"
                       placeholder="Enter email..."
                       @bind="SearchParameters.CustomerEmail"
                       @bind:event="oninput"/>
            </div>

            <!-- Phone -->
            <div class="mb-3">
                <label class="form-label small fw-semibold text-muted">
                    <i class="bi bi-telephone me-1"></i>Phone Number
                </label>
                <input type="text"
                       class="form-control form-control-sm"
                       placeholder="Enter phone..."
                       @bind="SearchParameters.CustomerPhone"
                       @bind:event="oninput"/>
            </div>

            <hr class="my-3"/>
        }
        

        @if (showRestaurantFilters)
        {
            <!-- Restaurant Name -->
            <div class="mb-3">
                <label class="form-label small fw-semibold text-muted">
                    <i class="bi bi-house"></i>Restuarant Name
                </label>
                <input type="text"
                       class="form-control form-control-sm"
                       placeholder="Enter Restaurant name"
                       @bind="SearchParameters.RestaurantName"
                       @bind:event="oninput"/>
            </div>

            <hr class="my-3"/>
        }


        <!-- StatusEnumDto -->
        <div class="mb-3">
            <label class="form-label small fw-semibold text-muted">
                <i class="bi bi-bookmark me-1"></i>StatusEnumDto
            </label>
            <select class="form-select form-select-sm"
                    @bind="SearchParameters.Status"
                    @bind:event="oninput">
                <option value="">All StatusEnumDtoes</option>
                @foreach (var status in Enum.GetValues<ReservationStatusEnumDto>())
                {
                    <option value="@status">@status</option>
                }
            </select>
        </div>

        <!-- Date -->
        <div class="mb-3">
            <label for="date" class="form-label small fw-semibold text-muted">
                <i class="bi bi-calendar me-1"></i>Reservation Date
            </label>
            <input type="date"
                   id="date"
                   class="form-control form-control-sm"
                   @bind="SearchParameters.ReservationDate"
                   @bind:event="oninput"/>
        </div>

        <!-- Time Range -->
        <div class="mb-3">
            <label class="form-label small fw-semibold text-muted">
                <i class="bi bi-clock me-1"></i>Time Range
            </label>
            <div class="mb-2">
                <label for="startTime" class="form-label small text-muted mb-1">From:</label>
                <input type="time"
                       id="startTime"
                       class="form-control form-control-sm"
                       @bind="SearchParameters.ReservationDateFrom"
                       @bind:event="oninput"/>
            </div>
            <div>
                <label for="endTime" class="form-label small text-muted mb-1">To:</label>
                <input type="time"
                       id="endTime"
                       class="form-control form-control-sm"
                       @bind="SearchParameters.ReservationDateTo"
                       @bind:event="oninput"/>
            </div>
        </div>

        <!-- Buttons -->
        <div class="d-grid gap-2 mt-4">
            <button class="button button--outline button--primary" @onclick="() => OnApplyFilters.InvokeAsync()">
                <i class="bi bi-search me-2"></i>Apply Filters
            </button>
            <button class="button button--outline button--grey" @onclick="() => OnClearFilters.InvokeAsync()">
                <i class="bi bi-x-circle me-2"></i>Clear All
            </button>
        </div>
    </div>
</div>

@code {
    [Parameter] public ReservationSearchParameters SearchParameters { get; set; }
    [Parameter] public EventCallback OnApplyFilters { get; set; }
    [Parameter] public EventCallback OnClearFilters { get; set; }
    [Parameter] public bool showCustomerFilters { get; set; } = true;
    [Parameter] public bool showRestaurantFilters { get; set; } = true;
}
